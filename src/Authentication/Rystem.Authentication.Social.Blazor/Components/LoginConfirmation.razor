@page "/login/confirm/{provider}"

@code {
    protected override void OnParametersSet()
    {
        base.OnParametersSet();
    }
    protected override async Task OnParametersSetAsync()
    {
        await base.OnParametersSetAsync();
        // var provider = new Uri(NavigationManager.Uri).Segments.Last();
        // if (await Manager.FetchTokenAsync(provider))
        // {
        //     NavigationManager.NavigateTo("../../../../../");
        // }
        // else
        // {
        //     NavigationManager.NavigateTo("../../../../../");
        // }
    }
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        var provider = new Uri(NavigationManager.Uri).Segments.Last();
        if (await Manager.FetchTokenAsync(provider))
        {
            NavigationManager.NavigateTo("../../../../../");
        }
        else
        {
            NavigationManager.NavigateTo("../../../../../");
        }
        await base.OnAfterRenderAsync(firstRender);
    }
}
