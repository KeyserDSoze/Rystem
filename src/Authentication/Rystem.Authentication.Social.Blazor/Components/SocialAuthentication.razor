@if (IsAuthenticated)
{
    <CascadingValue Name="User" Value="User">
        @ChildContent
    </CascadingValue>
}
else
{
    <SocialLogin></SocialLogin>
}
@code {
    [Parameter]
    public required RenderFragment ChildContent { get; set; }
    private bool IsAuthenticated { get; set; }
    private string User { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!IsAuthenticated)
        {
            var value = await LocalStorage.GetTokenAsync();
            User = value?.AccessToken;
            IsAuthenticated = value != null;
            if (IsAuthenticated)
                StateHasChanged();
        }
        if (!IsAuthenticated)
        {
            IsAuthenticated = await Manager.FetchTokenAsync();
            if (IsAuthenticated)
            {
                await LocalStorage.DeleteStateAsync();
            }
        }
        await base.OnAfterRenderAsync(firstRender);
    }
}
