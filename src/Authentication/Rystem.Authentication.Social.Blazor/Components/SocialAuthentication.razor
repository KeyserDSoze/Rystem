@if (HasMe)
{
    <CascadingValue Name="User" Value="HasMe">
        @ChildContent
    </CascadingValue>
}
else if (Rendered)
{
    <SocialLogin></SocialLogin>
}
@code {
    [Parameter]
    public required RenderFragment ChildContent { get; set; }
    private bool HasMe { get; set; }
    private bool Rendered { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!HasMe)
        {
            var isAuthenticated = await Manager.FetchTokenAsync();
            if (isAuthenticated)
            {
                await LocalStorage.DeleteStateAsync();
            }
            if (isAuthenticated)
            {
                HasMe = await Manager.MeAsync();
                if (HasMe)
                    StateHasChanged();
            }
        }
        if (!Rendered)
        {
            Rendered = true;
            StateHasChanged();
        }
        await base.OnAfterRenderAsync(firstRender);
    }
}
