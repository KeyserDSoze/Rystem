<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Alessandro Rapiti">
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Rystem - Rystem</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" disabled>
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" >
        <link href="../css/custom.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Rystem</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Concepts</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href=".." class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../repository/" class="dropdown-item">Repository</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Core</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Rystem</a>
</li>
                                    
<li>
    <a href="../Rystem.DependencyInjection/" class="dropdown-item">Rystem.DependencyInjection</a>
</li>
                                    
<li>
    <a href="../Rystem.DependencyInjection.Web/" class="dropdown-item">Rystem.DependencyInjection.Web</a>
</li>
                                    
<li>
    <a href="../Rystem.Concurrency/" class="dropdown-item">Rystem.Concurrency</a>
</li>
                                    
<li>
    <a href="../Rystem.BackgroundJob/" class="dropdown-item">Rystem.BackgroundJob</a>
</li>
                                    
<li>
    <a href="../Rystem.Concurrency.Redis/" class="dropdown-item">Rystem.Concurrency.Redis</a>
</li>
                                    
<li>
    <a href="../Rystem.Test.XUnit/" class="dropdown-item">Rystem.Test.XUnit</a>
</li>
                                    
<li>
    <a href="../Rystem.Queue/" class="dropdown-item">Rystem.Queue</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Api</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../Rystem.Api/" class="dropdown-item">Rystem.Api</a>
</li>
                                    
<li>
    <a href="../Rystem.Api.Client/" class="dropdown-item">Rystem.Api.Client</a>
</li>
                                    
<li>
    <a href="../Rystem.Api.Server/" class="dropdown-item">Rystem.Api.Server</a>
</li>
                                    
<li>
    <a href="../Rystem.Api.Client.Authentication.BlazorServer/" class="dropdown-item">Rystem.Api.Client.Authentication.BlazorServer</a>
</li>
                                    
<li>
    <a href="../Rystem.Api.Client.Authentication.BlazorWasm/" class="dropdown-item">Rystem.Api.Client.Authentication.BlazorWasm</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Social Authentication</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../Rystem.Authentication.Social.Abstractions/" class="dropdown-item">Rystem.Authentication.Social.Abstractions</a>
</li>
                                    
<li>
    <a href="../Rystem.Authentication.Social/" class="dropdown-item">Rystem.Authentication.Social</a>
</li>
                                    
<li>
    <a href="../Rystem.Authentication.Social.Blazor/" class="dropdown-item">Rystem.Authentication.Social.Blazor</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Content</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../Rystem.Content.Abstractions/" class="dropdown-item">Rystem.Content.Abstractions</a>
</li>
                                    
<li>
    <a href="../Rystem.Content.Infrastructure.Storage.Blob/" class="dropdown-item">Rystem.Content.Infrastructure.Storage.Blob</a>
</li>
                                    
<li>
    <a href="../Rystem.Content.Infrastructure.Storage.File/" class="dropdown-item">Rystem.Content.Infrastructure.Storage.File</a>
</li>
                                    
<li>
    <a href="../Rystem.Content.Infrastructure.InMemory/" class="dropdown-item">Rystem.Content.Infrastructure.InMemory</a>
</li>
                                    
<li>
    <a href="../Rystem.Content.Infrastructure.M365.Sharepoint/" class="dropdown-item">Rystem.Content.Infrastructure.M365.Sharepoint</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Repository Framework</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Abstractions/" class="dropdown-item">Rystem.RepositoryFramework.Abstractions</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Api.Client/" class="dropdown-item">Rystem.RepositoryFramework.Api.Client</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Api.Server/" class="dropdown-item">Rystem.RepositoryFramework.Api.Server</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Cache/" class="dropdown-item">Rystem.RepositoryFramework.Cache</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Infrastructure.InMemory/" class="dropdown-item">Rystem.RepositoryFramework.Infrastructure.InMemory</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Infrastructure.Azure.Cosmos.Sql/" class="dropdown-item">Rystem.RepositoryFramework.Infrastructure.Azure.Cosmos.Sql</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Infrastructure.Azure.Storage.Blob/" class="dropdown-item">Rystem.RepositoryFramework.Infrastructure.Azure.Storage.Blob</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Infrastructure.Azure.Storage.Table/" class="dropdown-item">Rystem.RepositoryFramework.Infrastructure.Azure.Storage.Table</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Infrastructure.Dynamics.Dataverse/" class="dropdown-item">Rystem.RepositoryFramework.Infrastructure.Dynamics.Dataverse</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Infrastructure.EntityFramework/" class="dropdown-item">Rystem.RepositoryFramework.Infrastructure.EntityFramework</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Infrastructure.MsSql/" class="dropdown-item">Rystem.RepositoryFramework.Infrastructure.MsSql</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.MigrationTools/" class="dropdown-item">Rystem.RepositoryFramework.MigrationTools</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Web.Components/" class="dropdown-item">Rystem.RepositoryFramework.Web.Components</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Api.Client.Authentication.BlazorServer/" class="dropdown-item">Rystem.RepositoryFramework.Api.Client.Authentication.BlazorServer</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Api.Client.Authentication.BlazorWasm/" class="dropdown-item">Rystem.RepositoryFramework.Api.Client.Authentication.BlazorWasm</a>
</li>
                                    
<li>
    <a href="../Rystem.RepositoryFramework.Cache.Azure.Storage.Blob/" class="dropdown-item">Rystem.RepositoryFramework.Cache.Azure.Storage.Blob</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../repository/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../Rystem.DependencyInjection/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                              <button id="theme-menu" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme" class="nav-link dropdown-toggle">
                                <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                <span class="d-lg-none ms-2">Toggle theme</span>
                              </button>
                              <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                                    <i class="fa-solid fa-sun fa-fw"></i>
                                    <span class="ms-2">Light</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="true">
                                    <i class="fa-solid fa-moon fa-fw"></i>
                                    <span class="ms-2">Dark</span>
                                    <i class="fa-solid fa-check ms-auto"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="auto" aria-pressed="false">
                                    <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                    <span class="ms-2">Auto</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                              </ul>
                            </li>
                    </ul>
                </div>
            </div>
        </div>
        <script src="../js/darkmode.js"></script>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#extension-methods" class="nav-link">Extension methods</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#stopwatch" class="nav-link">Stopwatch</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#linq-expression-serializer" class="nav-link">Linq expression serializer</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#reflection-helper" class="nav-link">Reflection helper</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#name-of-calling-class" class="nav-link">Name of calling class</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#extensions-for-type-class" class="nav-link">Extensions for Type class</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#mock-a-type" class="nav-link">Mock a Type</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#check-nullability-for-properties-fields-and-parameters" class="nav-link">Check nullability for properties, fields and parameters.</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#text-extensions" class="nav-link">Text extensions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#character-separated-value-csv" class="nav-link">Character separated-value (CSV)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#minimization-of-a-model-based-on-csv-concept" class="nav-link">Minimization of a model (based on CSV concept)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#extensions-for-json" class="nav-link">Extensions for json</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#extensions-for-task" class="nav-link">Extensions for Task</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#taskmanager" class="nav-link">TaskManager</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#concurrency" class="nav-link">Concurrency</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#concurrentlist" class="nav-link">ConcurrentList</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="extension-methods">Extension methods</h1>
<h2 id="stopwatch">Stopwatch</h2>
<p>You can monitor the time spent on an action, task or in a method.
Some examples from Unit test.</p>
<pre><code>var started = Stopwatch.Start();
//do something
await Task.Delay(2000);
var result = started.Stop();
</code></pre>
<p>or</p>
<pre><code>var result = await Stopwatch.MonitorAsync(async () =&gt;
{
    await Task.Delay(2000);
});
</code></pre>
<p>or with a return value</p>
<pre><code> var result = await Stopwatch.MonitorAsync(async () =&gt;
{
    await Task.Delay(2000);
    return 3;
});
</code></pre>
<h1 id="linq-expression-serializer">Linq expression serializer</h1>
<p>Usually a linq expression is not serializable as string. With this method you can serialize your expression with some limits. Only primitives are allowed in the expression body.
An example from Unit test.</p>
<pre><code>Expression&lt;Func&lt;MakeIt, bool&gt;&gt; expression = ƒ =&gt; ƒ.X == q &amp;&amp; ƒ.Samules.Any(x =&gt; x == k) &amp;&amp; ƒ.Sol &amp;&amp; (ƒ.X.Contains(q) || ƒ.Sol.Equals(IsOk)) &amp;&amp; (ƒ.E == id | ƒ.Id == V) &amp;&amp; (ƒ.Type == MakeType.Yes || ƒ.Type == qq);
var serialized = expression.Serialize();
</code></pre>
<p>with result</p>
<pre><code>"ƒ =&gt; ((((((ƒ.X == \"dasda\") AndAlso ƒ.Samules.Any(x =&gt; (x == \"ccccde\"))) AndAlso ƒ.Sol) AndAlso (ƒ.X.Contains(\"dasda\") OrElse ƒ.Sol.Equals(True))) AndAlso ((ƒ.E == Guid.Parse(\"bf46510b-b7e6-4ba2-88da-cef208aa81f2\")) Or (ƒ.Id == 32))) AndAlso ((ƒ.Type == 1) OrElse (ƒ.Type == 2)))"
</code></pre>
<p>with deserialization</p>
<pre><code>var newExpression = expressionAsString.Deserialize&lt;MakeIt, bool&gt;();
</code></pre>
<p>and usage, for instance, with Linq</p>
<pre><code>var result = makes.Where(newExpression.Compile()).ToList();
</code></pre>
<p>you can deserialize and compile at the same time with</p>
<pre><code>var newExpression = expressionAsString.DeserializeAndCompile&lt;MakeIt, bool&gt;();
</code></pre>
<p>you can deserialize as dynamic and use the linq dynamic methods</p>
<pre><code>Expression&lt;Func&lt;MakeIt, int&gt;&gt; expression = x =&gt; x.Id;
string value = expression.Serialize();
LambdaExpression newLambda = value.DeserializeAsDynamic&lt;MakeIt&gt;();
var got = makes.AsQueryable();
var cut = got.OrderByDescending(newLambda).ThenByDescending(newLambda).ToList();
</code></pre>
<p>please see the unit test <a href="https://github.com/KeyserDSoze/RystemV3/blob/master/src/Rystem.Test/Rystem.Test.UnitTest/System.Linq/SystemLinq.cs">here</a> to understand better how it works
You may deal with return type of your lambda expression:</p>
<pre><code> LambdaExpression newLambda = value.DeserializeAsDynamic&lt;MakeIt&gt;();
 newLambda =  newLambda.ChangeReturnType&lt;bool&gt;();
</code></pre>
<p>or</p>
<pre><code> newLambda =  newLambda.ChangeReturnType(typeof(bool));
</code></pre>
<h1 id="reflection-helper">Reflection helper</h1>
<h2 id="name-of-calling-class">Name of calling class</h2>
<p>You can find the name of the calling class from your method, with deep = 1 the calling class of your method, with deep = 2 the calling class that calls the class that calls your method, and so on, with fullName set to true you obtain the complete name of the discovered class.</p>
<pre><code>ReflectionHelper.NameOfCallingClass(deep, fullName);
</code></pre>
<h2 id="extensions-for-type-class">Extensions for Type class</h2>
<p>You can get the properties, fields and constructors for your class (and singleton them to save time during new requests)</p>
<pre><code>Type.FetchProperties();
Type.FecthConstructors();
Type.FetchFields();
</code></pre>
<p>You can check if a Type is a son or a father or both of other type (in the example Zalo and Folli are Sulo).
You may find more information in unit test <a href="https://github.com/KeyserDSoze/RystemV3/blob/master/src/Rystem.Test/Rystem.Test.UnitTest/System.Reflection/ReflectionTest.cs">here</a></p>
<pre><code>Zalo zalo = new();
Zalo zalo2 = new();
Folli folli = new();
Sulo sulo = new();
object quo = new();
int x = 2;
decimal y = 3;
Assert.True(zalo.IsTheSameTypeOrASon(sulo));
Assert.True(folli.IsTheSameTypeOrASon(sulo));
Assert.True(zalo.IsTheSameTypeOrASon(zalo2));
Assert.True(zalo.IsTheSameTypeOrASon(quo));
Assert.False(sulo.IsTheSameTypeOrASon(zalo));
Assert.True(sulo.IsTheSameTypeOrAParent(zalo));
Assert.False(y.IsTheSameTypeOrAParent(x));
</code></pre>
<h2 id="mock-a-type">Mock a Type</h2>
<p>If you need to create a type over an abstract class or interface you may use the mocking system of Rystem.
For example, if you have an abstract class like this one down below.</p>
<pre><code>public abstract class Alzio
{
    private protected string X { get; }
    public string O =&gt; X;
    public string A { get; set; }
    public Alzio(string x)
    {
        X = x;
    }
}
</code></pre>
<p>you can create an instace of it or simply mock it with</p>
<pre><code>var mocked = typeof(Alzio).CreateInstance("AAA") as Alzio;
mocked.A = "rrrr";
</code></pre>
<p>and you can use the class like a real class. You also may do it with</p>
<pre><code>Alzio alzio = null!;
var mocked = alzio.CreateInstance("AAA");
mocked.A = "rrrr";
</code></pre>
<p>or</p>
<pre><code>Mocking.CreateInstance&lt;Alzio&gt;("AAA");
</code></pre>
<p>you may see "AAA" as argument for your constructor in abstract class.</p>
<h1 id="check-nullability-for-properties-fields-and-parameters">Check nullability for properties, fields and parameters.</h1>
<p>Following an example from unit test.</p>
<pre><code>private sealed class InModel
{
    public string? A { get; set; }
    public string B { get; set; }
    public string? C;
    public string D;
    public InModel(string? b, string c)
    {
        A = b;
        B = c;
    }
    public void SetSomething(string? b, string c)
    {
        A = b;
        B = c;
    }
}
[Fact]
public void Test1()
{
    var type = typeof(InModel);
    var constructorParameters = type.GetConstructors().First().GetParameters().ToList();
    Assert.True(constructorParameters[0].IsNullable());
    Assert.False(constructorParameters[1].IsNullable());
    var methodParameters = type.GetMethod(nameof(InModel.SetSomething)).GetParameters().ToList();
    Assert.True(methodParameters[0].IsNullable());
    Assert.False(methodParameters[1].IsNullable());
    var properties = type.GetProperties().ToList();
    Assert.True(properties[0].IsNullable());
    Assert.False(properties[1].IsNullable());
    var fields = type.GetFields().ToList();
    Assert.True(fields[0].IsNullable());
    Assert.False(fields[1].IsNullable());
}
</code></pre>
<h1 id="text-extensions">Text extensions</h1>
<p>You may convert as fast as possible byte[] to string or stream to byte[] or byte[] to stream or stream to string or string to stream.
For example, string to byte array and viceversa.</p>
<pre><code>string olfa = "daskemnlandxioasndslam dasmdpoasmdnasndaslkdmlasmv asmdsa";
var bytes = olfa.ToByteArray();
string value = bytes.ConvertToString();
</code></pre>
<p>For example, string to stream and viceversa.</p>
<pre><code>string olfa = "daskemnlandxioasndslam dasmdpoasmdnasndaslkdmlasmv asmdsa";
var stream = olfa.ToStream();
string value = stream.ConvertToString();
</code></pre>
<p>You may read a string with break lines as an enumerable of string</p>
<pre><code>string olfa = "daskemnlandxioasndslam\ndasmdpoasmdnasndaslkdmlasmv\nasmdsa";
var stream = olfa.ToStream();
var strings = new List&lt;string&gt;();
await foreach (var x in stream.ReadLinesAsync())
{
    strings.Add(x);
}
</code></pre>
<p>A simple method to make uppercase the first character.</p>
<pre><code>string olfa = "dasda";
var olfa2 = olfa.ToUpperCaseFirst();
</code></pre>
<p>A simple method to check if a char is contained at least X times.</p>
<pre><code>string value = "abcderfa";
bool containsAtLeastTwoAChar = value.ContainsAtLeast(2, 'a');
</code></pre>
<h1 id="character-separated-value-csv">Character separated-value (CSV)</h1>
<p>Transform any kind of IEnumerable data in a CSV string.</p>
<pre><code>string value = _models.ToCsv();
</code></pre>
<h1 id="minimization-of-a-model-based-on-csv-concept">Minimization of a model (based on CSV concept)</h1>
<p>It's a brand new idea to serialize any kind of objects (with lesser occupied space of json), the idea comes from Command separated-value standard.
To serialize</p>
<pre><code>string value = _models.ToMinimize();
</code></pre>
<p>To deserialize (for instance in a List of a class named CsvModel)</p>
<pre><code>value.FromMinimization&lt;List&lt;CsvModel&gt;&gt;();
</code></pre>
<h1 id="extensions-for-json">Extensions for json</h1>
<p>I don't know if you are fed up to write JsonSerializer.Serialize, I do, and so, you may use the extension method to serialize faster.
To serialize</p>
<pre><code>var text = value.ToJson();
</code></pre>
<p>To deserialize in a class (for instance a class named User)</p>
<pre><code>var value = text.FromJson&lt;User&gt;();
</code></pre>
<h1 id="extensions-for-task">Extensions for Task</h1>
<p>I don't know if you still are fed up to write .ConfigureAwait(false) to eliminate the context waiting for a task. I do.
<a href="https://devblogs.microsoft.com/dotnet/configureawait-faq/">Why should I set the configure await to false?</a>
To set configure await to false</p>
<pre><code>await {your async task}.NoContext();
</code></pre>
<p>Instead, to get the result as synchronous result but with a configure await set to false.</p>
<pre><code>{your async task}.ToResult();
</code></pre>
<p>You may change the behavior of your NoContext() or ToResult(), setting (in the bootstrap of your application for example)</p>
<pre><code>RystemTask.WaitYourStartingThread = true;
</code></pre>
<p>When do I need a true? In windows application for example you have to return after a button clicked to the same thread that started the request.</p>
<h1 id="taskmanager">TaskManager</h1>
<p>When you need to run a list of tasks concurrently you may use this static method.</p>
<p>In the next example with TaskManager.WhenAll you may run a method ExecuteAsync {times} times with {concurrentTasks} times in concurrency, and running them when a time slot is free.
For example if you run this function with 8 times and 3 concurrentsTasks and true in runEverytimeASlotIsFree
You will have this behavior: first 3 tasks starts and since the fourth the implementation waits the end of one of the 3 started before. As soon as one of the 3 started is finished the implementation starts to run the fourth.</p>
<pre><code>var bag = new ConcurrentBag&lt;int&gt;();
await TaskManager.WhenAll(ExecuteAsync, times, concurrentTasks, runEverytimeASlotIsFree).NoContext();

Assert.Equal(times, bag.Count);

async Task ExecuteAsync(int i, CancellationToken cancellationToken)
{
    await Task.Delay(i * 20, cancellationToken).NoContext();
    bag.Add(i);
}
</code></pre>
<p>You may run a {atLeast} times of tasks and stopping to wait the remaining tasks with TaskManager.WhenAtLeast</p>
<pre><code>var bag = new ConcurrentBag&lt;int&gt;();
await TaskManager.WhenAtLeast(ExecuteAsync, times, atLeast, concurrentTasks).NoContext();

Assert.True(bag.Count &lt; times);
Assert.True(bag.Count &gt;= atLeast);

async Task ExecuteAsync(int i, CancellationToken cancellationToken)
{
    await Task.Delay(i * 20, cancellationToken).NoContext();
    bag.Add(i);
}
</code></pre>
<h1 id="concurrency">Concurrency</h1>
<h2 id="concurrentlist">ConcurrentList</h2>
<p>You can use the ConcurrentList implementation to have the List behavior with lock operations.</p>
<pre><code>var items = new ConcurrentList&lt;ItemClass&gt;();
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>©2020</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../js/custom.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
